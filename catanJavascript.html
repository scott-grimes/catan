<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<style>
canvas {
    border: 1px solid #d3d3d3;
    background-color: #f1f1f1;
}
</style>
</head>
<body onload="startGame()">
<script>
var tileColor = {'ocean':"HoneyDew", 'pasture': "white", 'field' : "white",'mountains': "white",'hills': "white",'desert':"white",'forest':"white",'port':"HoneyDew"};

function startGame() {
    myGameArea.start();
    var board = new Board();
    drawBaseBoard();
}
var myGameArea = {
    canvas : document.createElement("canvas"),
    start : function() {
        this.canvas.width = 500;
        this.canvas.height = 400;
        this.hexSize = 30;
        this.context = this.canvas.getContext("2d");
        document.body.insertBefore(this.canvas, document.body.childNodes[0]);
    }
}


function drawBaseBoard(){
b = new Board();
    for(var i = 0;i<b.tiles.length;i+=1){
    	for(var j = 0;j<b.tiles[i].length;j+=1){
    	if(b.tiles[i][j] != null){
   			 DrawHex(b.tiles[i][j]);		
             }
             }
    
}
}

function Hex(id,x,y,type){

    this.id = id;
    this.x = x;
    this.y = y;
    this.type = type;
    
}

function DrawHex(hex) {
    //center of gameboard at x_0, y_0
	x_0 = 250;
	y_0 = 200;
    size = 30;
    //x_a,y_a are the axial coordinates of the hex
    x_a = hex.x
    y_a = hex.y
    
    //x,y are pixel coords of the center of the hexagon
    x = x_0+x_a*size*2-size*(Math.abs(y_a));
    y = y_0+y_a*size*1.5;
    ctx = myGameArea.context;
    size = myGameArea.hexSize
    ctx.beginPath();
	ctx.moveTo (x,y-size);  
	ctx.lineTo (x+size,y-size*.5);  
	ctx.lineTo (x+size,y+size*.5);      
	ctx.lineTo (x,y+size);   
	ctx.lineTo (x-size,y+size*.5);  
	ctx.lineTo (x-size,y-size*.5);   
	ctx.closePath();
    ctx.stroke();
    ctx.fillStyle=tileColor[hex.type];
    ctx.fill();
    ctx.font="20px Georgia";
    ctx.fillStyle="black";
    ctx.fillText(String(hex.id),x,y);
    
}

function Board(){
  this.resources = ['field','field','field','field','forest','forest','forest','forest','pasture','pasture','pasture','pasture','mountains','mountains','mountains','hills','hills','hills','desert']
 this.ports = ['ore','wheat','wood','wool','brick','generic','generic','generic','generic']
  this.count = [2,3,3,4,4,5,5,6,6,8,8,9,9,10,10,11,11,12]

this.tiles = [[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null]];


//places land tiles randomly into our game board. capital letters represent land tiles
    i = 0;
    ident = 65;
    for(var row = -2;row<=2;row+=1){
      count = -Math.abs(row)+5;
      start = Math.abs(row)-2;
      for(var col = start;col<start+count;col+=1){
        
        tileVal = 0;
        if(this.resources[i-1]=='desert'){
          tileVal=7;
          i-=1
          }
        else{
          tileVal = this.count[i]
          }
        id = String.fromCharCode(ident);
        h = new Hex(id,col,row,this.resources[i]);
        
        
        hexRow = row+3;
        hexCol = col+3+Math.min(0,-row);
        this.tiles[hexRow][hexCol] = h;
        i+=1;
        ident+=1;
     }
    }
    
    
    
    
    oceanLocationsInAxialCoords = [[1,-3],[3,-3],[3,-1],[2,1],[0,3],[-2,3],[-3,2],[-3,0],[-1,-2]];
    
    portLocationsInAxialCoords = [[0,-3],[2,-3],[3,-2],[3,0],[1,2],[-1,3],[-3,3],[-3,1],[-2,-1]];
    
    ident = 97; // lowercase a
    //add our empty oceans  (lowercase letters)
    for(var i = 0;i<9;i+=1){
    x = oceanLocationsInAxialCoords[i][0];
    y = oceanLocationsInAxialCoords[i][1];
      h = new Hex(String.fromCharCode(ident),x,y,'ocean');
      this.tiles[y+3][x+3] = h;
      ident+=1;
    }
    
    ident = 1; // number as a string
    //add our empty oceans  (lowercase letters)
    for(var i = 0;i<9;i+=1){
    x = portLocationsInAxialCoords[i][0];
    y = portLocationsInAxialCoords[i][1];
      h = new Hex(ident.toString(),x,y,'port');
      this.tiles[y+3][x+3] = h;
      ident+=1;
      console.log(x,y);
    }
    

}




</script>

<p>Catan!</p>

</body>
</html>
